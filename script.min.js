document.addEventListener('DOMContentLoaded',()=>{initStatsAnimation();initScrollAnimation();initSmoothScroll();initButtonHoverEffects();initOnlineCounter();});function initStatsAnimation(){const stats=document.querySelectorAll('.stat-number');if(stats.length===0)return;const observerOptions={threshold: 0.5,rootMargin: '0px'};const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting&&!entry.target.dataset.animated){const element=entry.target;const target=parseInt(element.dataset.target,10);const suffix=element.dataset.suffix||'';element.dataset.animated='true';animateCounter(element,target,2500,suffix);observer.unobserve(element);}});},observerOptions);stats.forEach(stat=>{if(!stat.dataset.target){const rawText=stat.textContent.trim();const match=rawText.match(/^(\d+)(.*)$/);if(match){stat.dataset.target=match[1];stat.dataset.suffix=match[2];}else{return;}}stat.textContent='0'+(stat.dataset.suffix||'');observer.observe(stat);});}function animateCounter(element,target,duration,suffix){const startTime=performance.now();function easeOutQuint(t){return 1-Math.pow(1-t,5);}function animate(currentTime){const elapsed=currentTime-startTime;const progress=Math.min(elapsed/duration,1);const easedProgress=easeOutQuint(progress);const current=Math.floor(easedProgress*target);element.textContent=current+suffix;if(progress<1){requestAnimationFrame(animate);}else{element.textContent=target+suffix;}}requestAnimationFrame(animate);}function initScrollAnimation(){const elementsToAnimate=document.querySelectorAll('.section-card');if(!window.IntersectionObserver){elementsToAnimate.forEach(el=>el.style.opacity=1);return;}const scrollObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting&&!entry.target.dataset.scrollAnimated){entry.target.dataset.scrollAnimated='true';entry.target.style.opacity='1';entry.target.style.transform='translateY(0)';}});},{threshold: 0.1});elementsToAnimate.forEach(card=>{card.style.opacity='0';card.style.transform='translateY(30px)';card.style.transition='opacity 0.6s ease,transform 0.6s ease';scrollObserver.observe(card);});}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function(e){const href=this.getAttribute('href');if(href==='#'||href==='#!')return;e.preventDefault();const target=document.querySelector(href);if(target){target.scrollIntoView({behavior: 'smooth',block: 'start'});}});});}function initButtonHoverEffects(){document.querySelectorAll('.cta-button').forEach(button=>{button.addEventListener('mouseenter',function(){this.style.transform='scale(1.05)';});button.addEventListener('mouseleave',function(){this.style.transform='scale(1)';});});}function animateIcons(){const icons=document.querySelectorAll('.section-icon');icons.forEach((icon,index)=>{setTimeout(()=>{icon.style.animation='bounce 2s ease-in-out infinite';},index*200);});}window.addEventListener('load',()=>{setTimeout(animateIcons,500);});function initOnlineCounter(){const counterElement=document.querySelector('.online-count');if(!counterElement)return;const baseCount=parseInt(counterElement.dataset.base,10)||87;const minFluctuation=-5;const maxFluctuation=8;function updateCounter(){const fluctuation=Math.floor(Math.random()*(maxFluctuation-minFluctuation+1))+minFluctuation;const newCount=Math.max(baseCount+fluctuation,50);counterElement.classList.add('updating');setTimeout(()=>{counterElement.textContent=newCount;counterElement.classList.remove('updating');},150);}function scheduleNextUpdate(){const delay=Math.random()*7000+8000;setTimeout(()=>{updateCounter();scheduleNextUpdate();},delay);}setTimeout(()=>{scheduleNextUpdate();},5000);}